---
import AlternatingTiles from "./AlternatingTiles.astro";

const { t } = Astro.props;

const cocktailsTitle = t?.underHero?.tiles?.cocktailsTitle ?? "";
const [cocktailsAccent, ...cocktailsRestParts] = cocktailsTitle.split(" ");
const cocktailsRest = cocktailsRestParts.join(" ").trim();

const mobileBarTitle = t?.underHero?.tiles?.mobileBarTitle ?? "";
const [mobileBarAccentFirst, mobileBarAccentSecond, ...mobileBarRestParts] = mobileBarTitle.split(" ");
const mobileBarAccent = [mobileBarAccentFirst, mobileBarAccentSecond].filter(Boolean).join(" ");
const mobileBarRest = mobileBarRestParts.join(" ").trim();

const viewCocktailMenusCta = t?.cta?.viewCocktailMenus ?? "HIER UNSERE COCKTAIL MENUS ANSEHEN";
const requestNowCta = t?.cta?.requestNow ?? "JETZT ANFRAGEN";

const cocktailImage = "/images/russian-wild-berry-cocktail.jpg";
const mobileBarImage = "/images/mobile-cocktailbar-mit-rueckbuffet.jpg";

const escapeHTML = (value: string) =>
  value?.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#39;") ?? "";

const introTextHtml = `
  <h2 class="panel-title display-heading display-size-h1 underhero-intro-title">
    ${escapeHTML(t.underHero.intro.h2Line1)}<br />
    <span class="accent-text">${escapeHTML(t.underHero.intro.h2Line2)}</span><br />
    ${escapeHTML(t.underHero.intro.h2Line3)}
  </h2>
  <div class="panel-sep" aria-hidden="true"></div>
  <p class="panel-text">
    ${escapeHTML(t.underHero.intro.paragraph)}
  </p>
`;

const cocktailsTextHtml = `
  <h3 class="panel-title display-heading display-size-h1">
    <span class="accent-text">${escapeHTML(cocktailsAccent || cocktailsTitle)}</span>${cocktailsRest ? ` ${escapeHTML(cocktailsRest)}` : ""}
  </h3>
  <div class="panel-sep" aria-hidden="true"></div>

  <p class="panel-text">
    ${escapeHTML(t.underHero.tiles.cocktailsText)}
  </p>

  <a class="panel-cta mb-btn" href="#" aria-label="${escapeHTML(viewCocktailMenusCta)}">
    ${escapeHTML(viewCocktailMenusCta)}
  </a>
`;

const mobileBarTextHtml = `
  <h3 class="panel-title display-heading display-size-h1">
    <span class="accent-text">${escapeHTML(mobileBarAccent || mobileBarTitle)}</span>${mobileBarRest ? ` ${escapeHTML(mobileBarRest)}` : ""}
  </h3>
  <div class="panel-sep" aria-hidden="true"></div>

  <p class="panel-text">
    ${escapeHTML(t.underHero.tiles.mobileBarText)}
  </p>

  <a class="panel-cta mb-btn" href="/anfrage" aria-label="${escapeHTML(requestNowCta)}">
    ${escapeHTML(requestNowCta)}
  </a>
`;

const rows = [
  {
    left: {
      kind: "image",
      panelClass: "is-align-left is-intro",
      bgImage: "/images/cocktail-catering-moving-bars.jpg",
      speed: 0.35,
    },
    right: { kind: "text", ariaLabel: "Private Feier Text", html: introTextHtml },
  },
  {
    left: { kind: "text", ariaLabel: "Feinste Cocktails Text", html: cocktailsTextHtml },
    right: {
      kind: "image",
      panelClass: "is-align-left is-cocktail",
      ariaLabel: "Feinste Cocktails Bild",
      bgImage: cocktailImage,
      speed: 0.35,
    },
  },
  {
    left: {
      kind: "image",
      panelClass: "is-align-right is-bar",
      ariaLabel: "Mobile Bar Bild",
      bgImage: mobileBarImage,
      speed: 0.35,
    },
    right: { kind: "text", ariaLabel: "Mobile Bar Text", html: mobileBarTextHtml },
  },
];
---

<AlternatingTiles rows={rows} />
