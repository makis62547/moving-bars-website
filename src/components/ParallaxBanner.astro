---
const {
  src,
  alt = "Moving Bars",
  height = "clamp(420px, 60vh, 760px)",
} = Astro.props;
---

<section class="mb-parallax full-bleed parallax-section" style={`--mb-h:${height};`}>
  <div class="mb-parallax__inner">
    <img
      class="mb-parallax__img parallax-bg"
      data-parallax
      data-speed="0.35"
      src={src}
      alt={alt}
      loading="eager"
      decoding="async"
      fetchpriority="high"
    />
  </div>
</section>

<style>
.full-bleed{
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
}

.mb-parallax{
  height: var(--mb-h);
  overflow: hidden;
}


.mb-parallax__inner{
  position: relative;
  height: 100%;
}

.mb-parallax__img{
  position: absolute;
  inset: -12%;
  width: 124%;
  height: 124%;
  object-fit: cover;
  object-position: center;
  --parallax-scale: 1.08;
}

@media (prefers-reduced-motion: reduce){
  .mb-parallax__img{ transform: none !important; }
}
</style>
