---
const cocktailImage = "/images/moving-bars-cocktail-geschichten.jpg";
const coffeeImage = "/images/moving-bars-cocktail-geschichten.jpg"; // TODO: Replace with dedicated coffee blog visual
---

<section class="blogs-overview" aria-label="Blogübersicht">
  <div class="blog-block">
    <div class="blog-intro">
      <div class="blog-intro-text">
        <h2 class="blog-title">
          <span class="accent-text">COCKTAIL</span> STORIES
        </h2>
        <div class="blog-divider" aria-hidden="true"></div>
        <p class="blog-intro-copy">
          Spannende Stories rund um Signature Drinks, Events und die Menschen hinter der Bar. Lorem ipsum dolor sit amet,
          consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </p>
      </div>
      <article
        class="blog-intro-media panel panel--slider is-blog-media"
        aria-label="Cocktail Blog Bild"
        data-panel-parallax
        data-speed="0.35"
      >
        <div class="panel-bg blog-media-bg" role="presentation" style={`background-image: url(${cocktailImage});`}></div>
      </article>
    </div>

    <div class="blog-posts" aria-label="Neueste Cocktail Stories">
      <div class="posts-track">
        <article class="post-card">
          <div class="post-media" role="presentation" style={`background-image: url(${cocktailImage});`}></div>
          <div class="post-body">
            <h3 class="post-title accent-text">SIGNATURE DRINKS</h3>
            <p class="post-meta">12. August 2024</p>
            <p class="post-excerpt">
              Wie unsere Barkeeper neue Lieblingsdrinks entwickeln – von der ersten Idee bis zur perfekt ausbalancierten
              Komposition im Glas.
            </p>
            <button class="post-cta" type="button">Mehr lesen</button>
          </div>
        </article>
        <article class="post-card">
          <div class="post-media" role="presentation" style={`background-image: url(${cocktailImage});`}></div>
          <div class="post-body">
            <h3 class="post-title accent-text">BACKSTAGE</h3>
            <p class="post-meta">02. August 2024</p>
            <p class="post-excerpt">
              Ein Blick hinter die Kulissen unserer mobilen Bars: Logistik, Setup und die kleinen Details, die Events
              unvergesslich machen.
            </p>
            <button class="post-cta" type="button">Mehr lesen</button>
          </div>
        </article>
        <article class="post-card">
          <div class="post-media" role="presentation" style={`background-image: url(${cocktailImage});`}></div>
          <div class="post-body">
            <h3 class="post-title accent-text">BAR TEAM</h3>
            <p class="post-meta">21. Juli 2024</p>
            <p class="post-excerpt">
              Lerne das Team kennen: Persönliche Geschichten, Lieblingsdrinks und was unsere Crew bei langen Nächten
              antreibt.
            </p>
            <button class="post-cta" type="button">Mehr lesen</button>
          </div>
        </article>
        <article class="post-card">
          <div class="post-media" role="presentation" style={`background-image: url(${cocktailImage});`}></div>
          <div class="post-body">
            <h3 class="post-title accent-text">EVENT HIGHLIGHTS</h3>
            <p class="post-meta">10. Juli 2024</p>
            <p class="post-excerpt">
              Die schönsten Momente der letzten Monate – vom Messeauftritt bis zur Rooftop-Party über den Dächern der
              Stadt.
            </p>
            <button class="post-cta" type="button">Mehr lesen</button>
          </div>
        </article>
      </div>
    </div>
  </div>

  <div class="blog-block">
    <div class="blog-intro">
      <div class="blog-intro-text">
        <h2 class="blog-title">
          <span class="accent-text">KAFFEE</span> MOMENTE
        </h2>
        <div class="blog-divider" aria-hidden="true"></div>
        <p class="blog-intro-copy">
          Alles rund um unsere mobile Kaffeebar: Bohnen, Brühmethoden und die Stimmung auf Events mit Duft nach frisch
          gemahlenem Kaffee. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        </p>
      </div>
      <article
        class="blog-intro-media panel panel--slider is-blog-media"
        aria-label="Kaffee Blog Bild"
        data-panel-parallax
        data-speed="0.35"
      >
        <div class="panel-bg blog-media-bg" role="presentation" style={`background-image: url(${coffeeImage});`}></div>
      </article>
    </div>

    <div class="blog-posts" aria-label="Neueste Kaffee Momente">
      <div class="posts-track">
        <article class="post-card">
          <div class="post-media" role="presentation" style={`background-image: url(${coffeeImage});`}></div>
          <div class="post-body">
            <h3 class="post-title accent-text">LATTE ART</h3>
            <p class="post-meta">05. August 2024</p>
            <p class="post-excerpt">
              Wie unsere Baristas Latte-Art auf Events zaubern und warum die richtige Milchtemperatur den Unterschied
              macht.
            </p>
            <button class="post-cta" type="button">Mehr lesen</button>
          </div>
        </article>
        <article class="post-card">
          <div class="post-media" role="presentation" style={`background-image: url(${coffeeImage});`}></div>
          <div class="post-body">
            <h3 class="post-title accent-text">ROAST STORIES</h3>
            <p class="post-meta">28. Juli 2024</p>
            <p class="post-excerpt">
              Welche Bohnen wir wählen, wie wir mit Röstereien zusammenarbeiten und was das für den Geschmack im Cup
              bedeutet.
            </p>
            <button class="post-cta" type="button">Mehr lesen</button>
          </div>
        </article>
        <article class="post-card">
          <div class="post-media" role="presentation" style={`background-image: url(${coffeeImage});`}></div>
          <div class="post-body">
            <h3 class="post-title accent-text">MOBILE KAFFEEBAR</h3>
            <p class="post-meta">18. Juli 2024</p>
            <p class="post-excerpt">
              Unsere Setups für Messen und Hochzeiten – welche Maschinen wir einsetzen und wie wir perfekte Crema vor Ort
              sicherstellen.
            </p>
            <button class="post-cta" type="button">Mehr lesen</button>
          </div>
        </article>
      </div>
    </div>
  </div>
</section>

<style>
  .blogs-overview {
    width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    padding: var(--blogs-pad-block) var(--blogs-pad-inline);
    background: #000;
    color: var(--text-color);
    display: grid;
    gap: var(--blogs-pad-block);
    border-radius: 0 !important;
  }

  .blog-block {
    display: grid;
    gap: var(--blogs-gap);
    border-radius: 0 !important;
  }

  .blog-intro {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--blogs-gap);
    min-height: var(--blogs-intro-min-height);
    border-radius: 0 !important;
  }

  .blog-intro-text {
    padding: var(--blogs-intro-text-pad);
    background: #050505;
    display: grid;
    align-content: center;
    gap: var(--blogs-gap);
    border-radius: 0 !important;
  }

  .blog-title {
    margin: 0;
    font-size: clamp(2.2rem, 4vw, 3rem);
    line-height: var(--heading-line-height);
    text-transform: uppercase;
    color: var(--heading-color);
  }

  .blog-divider {
    width: var(--blogs-divider-width);
    height: var(--blogs-divider-height);
    margin-top: var(--blogs-divider-gap);
    background: var(--accent);
  }

  .blog-intro-copy {
    margin: 0;
    max-width: 70ch;
    color: rgba(247, 247, 247, 0.82);
    line-height: 1.7;
  }

  .blog-intro-media {
    position: relative;
    overflow: hidden;
    min-height: var(--blogs-intro-min-height);
    height: 100%;
    border-radius: 0 !important;
  }

  .blog-intro-media.is-blog-media {
    --bg-zoom: 0%;
    --bg-x: 50%;
    --bg-y: 50%;
  }

  .blog-intro-media .panel-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: var(--bg-x) calc(var(--bg-y) + var(--py, 0px));
    background-repeat: no-repeat;
    background-color: #000;
    background-attachment: scroll;
    z-index: 0;
    border-radius: 0 !important;
  }

  .blog-posts {
    border-radius: 0 !important;
  }

  .posts-track {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    gap: var(--blogs-gap);
    padding-inline: clamp(1rem, 3vw, 2rem);
  }

  .posts-track::-webkit-scrollbar { height: 10px; }
  .posts-track::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.15); }

  .post-card {
    background: #0b0b0b;
    border: 1px solid rgba(var(--accent-rgb), 0.25);
    width: var(--blogs-post-snap-width);
    scroll-snap-align: start;
    display: grid;
    grid-template-rows: auto 1fr;
    min-height: 100%;
    border-radius: 0 !important;
  }

  .post-media {
    position: relative;
    padding-top: calc(100% / var(--blogs-post-media-ratio));
    background-size: cover;
    background-position: center calc(50% + var(--py, 0px));
    background-repeat: no-repeat;
    border-radius: 0 !important;
  }

  .post-body {
    padding: clamp(1rem, 2.4vw, 1.75rem);
    display: grid;
    gap: 0.5rem;
    border-radius: 0 !important;
  }

  .post-title {
    margin: 0;
    font-size: var(--blogs-post-title-size);
    text-transform: uppercase;
    color: var(--accent);
  }

  .post-meta {
    margin: 0;
    color: rgba(247, 247, 247, 0.7);
    letter-spacing: 0.02em;
    font-size: 0.95rem;
  }

  .post-excerpt {
    margin: 0;
    color: rgba(247, 247, 247, 0.85);
    line-height: 1.6;
  }

  .post-cta {
    margin-top: auto;
    align-self: start;
    height: var(--blogs-btn-height);
    background: transparent;
    color: var(--accent);
    border: 1px solid rgba(var(--accent-rgb), 0.7);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    padding: 0 1.25rem;
    border-radius: 0 !important;
    cursor: pointer;
  }

  .post-cta:hover,
  .post-cta:focus-visible {
    outline: none;
    background: rgba(var(--accent-rgb), 0.12);
    border-color: rgba(var(--accent-rgb), 0.9);
  }

  @media (min-width: 900px) {
    .blog-intro {
      grid-template-columns: 1fr 1fr;
      align-items: stretch;
    }

    .blog-intro-text { align-self: stretch; }

    .posts-track {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--blogs-gap);
      padding-inline: 0;
      overflow: visible;
    }

    .post-card {
      width: 100%;
    }
  }

  /* Sicherheitsnetz gegen Rundungen */
  .blog-intro,
  .blog-intro-media,
  .blog-intro-text,
  .blog-media-bg,
  .post-card,
  .post-media,
  .post-body,
  .post-cta,
  .post-card *,
  .blog-posts,
  .posts-track,
  .blogs-overview,
  .blog-block {
    border-radius: 0 !important;
  }
</style>

<script>
  const panels = Array.from(document.querySelectorAll("[data-panel-parallax]"));

  const updateParallax = () => {
    const viewportCenter = window.innerHeight / 2;

    panels.forEach((panel) => {
      const rect = panel.getBoundingClientRect();
      const distanceFromCenter = rect.top + rect.height / 2 - viewportCenter;
      const speed = Number(panel.dataset.speed ?? "0.3");

      panel.style.setProperty("--py", `${-distanceFromCenter * speed}px`);
    });
  };

  const scheduleUpdate = () => {
    requestAnimationFrame(updateParallax);
  };

  updateParallax();
  window.addEventListener("scroll", scheduleUpdate, { passive: true });
  window.addEventListener("resize", scheduleUpdate);
</script>
