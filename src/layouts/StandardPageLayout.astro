---
import AlternatingTiles from "../components/AlternatingTiles.astro";
import GoogleReviewsBlock from "../components/GoogleReviewsBlock.astro";
import Hero from "../components/Hero.astro";
import HeroIntroBlock from "../components/HeroIntroBlock.astro";
import ServicesOverview from "../components/ServicesOverview.astro";
import type { Lang } from "../i18n";

type HeadlineOverride = {
  accent?: string;
  rest?: string;
  sep?: string;
};

type StandardPageLayoutProps = {
  lang: Lang;
  t?: Record<string, any>;
  heroProps: Parameters<typeof Hero>[0];
  introProps: Parameters<typeof HeroIntroBlock>[0];
  tilesRows?: Parameters<typeof AlternatingTiles>[0]["rows"];
  services?: { exclude?: string; headline?: HeadlineOverride };
  showReviews?: boolean;
};

const { lang, t, heroProps, introProps, tilesRows = [], services = {}, showReviews = true } =
  Astro.props as StandardPageLayoutProps;
const shouldRenderExtras = Boolean(Astro.slots?.default);
---

<main class="bg-black">
  <Hero {...heroProps} />

  <HeroIntroBlock {...introProps} />

  {tilesRows?.length > 0 && <AlternatingTiles rows={tilesRows} />}

  {showReviews !== false && <GoogleReviewsBlock lang={lang} t={t} />}

  <ServicesOverview exclude={services?.exclude} headline={services?.headline} lang={lang} />

  {shouldRenderExtras && <slot />}
</main>
