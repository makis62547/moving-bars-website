---
import BaseLayout from "../layouts/BaseLayout.astro";
import CocktailIcon from "../components/icons/CocktailIcon.astro";

const iconModules = import.meta.glob("../assets/icons/*.svg", {
  eager: true,
  query: "?raw",
  import: "default",
});

const icons = Object.entries(iconModules)
  .map(([path, svg]) => ({
    name: path.split("/").pop() ?? path,
    svg,
  }))
  .sort((a, b) => a.name.localeCompare(b.name));
---

<BaseLayout>
  <main class="icons-page">
    <div class="icon-grid" aria-label="Icon Ãœbersicht">
      {icons.map((icon) => (
        <div class="icon">
          <div class="icon-svg" set:html={icon.svg} />
          <span>{icon.name}</span>
        </div>
      ))}
    </div>

    <section class="mask-preview" aria-label="PNG Mask Vorschau">
      <h2>cocktail.png als CSS Mask</h2>
      <div class="icon">
        <div class="icon-svg mask-icon">
          <CocktailIcon size={40} />
        </div>
        <span>cocktail.png</span>
      </div>
    </section>
  </main>
</BaseLayout>

<style>
  .icons-page {
    background: #000;
    min-height: 100vh;
    padding: 48px 32px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .icon-grid {
    display: grid;
    grid-template-columns: repeat(6, minmax(0, 1fr));
    gap: 20px;
    width: min(1200px, 100%);
  }

  .mask-preview {
    margin-top: 40px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    align-items: flex-start;
  }

  .mask-preview h2 {
    color: var(--heading-color);
    margin: 0;
    font-size: 18px;
  }

  @media (max-width: 1024px) {
    .icon-grid {
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }
  }

  @media (max-width: 768px) {
    .icon-grid {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
  }

  @media (max-width: 540px) {
    .icon-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  .icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    padding: 16px;
    background: #0a0a0a;
    border: 1px solid #1a1a1a;
    border-radius: 8px;
  }

  .icon-svg {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
  }

  .icon-svg.mask-icon {
    background: transparent;
  }

  .icon svg {
    width: 40px;
    height: 40px;
    stroke: #ffffff;
    fill: none;
  }

  .icon span {
    color: #999;
    font-size: 12px;
    text-align: center;
    word-break: break-word;
  }
</style>
